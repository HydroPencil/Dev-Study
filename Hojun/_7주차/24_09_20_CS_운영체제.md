# 운영체제

---

## Byte Ordering이란
Byte Ordering이란 데이터가 저장되는 순서를 의미.
Byte Ordering의 방식에는 빅엔디안(Big Endian)과 리틀엔디안(Little Endian)이 있다.

### Big Endian

- MSB가 가장 낮은 주소에 위치하는 저장 방식
- 네트워크에서 데이터를 전송할 때 주로 사용됨
- 가장 낮은 주소에 MSB가 저장되므로, offset=0인 Byte를 보면 양수/음수를 바로 파악할 수 있다.


### Little Endian

- MSB가 가장 높은 주소에 위치하는 방식
- 마이크로프로세서에서 주로 사용된다.
- 가장 낮은 주소에 부호값이 아닌 데이터가 먼저 오기 때문에, 바로 연산을 할 수 있다.

## 동시성과 병렬성
동시성이란 논리적으로 동시에 수행될 수 있는 성질이고, 병렬성이란 물리적으로 동시에 수행될 수 있는 성질입니다.
ex) 1~100까지의 합을 구하는 작업을 할 경우
1. 범위를 나누어(1~25, 26~50, 51~75, 76~100) 4개의 쓰레드로 쿼드 코어에서 돌린다면, 동시성과 병렬성을 모두 가진다.
2. 범위를 나누어(1~25, 26~50, 51~75, 76~100) 이것을 싱클 코어에서 돌린다면, 이는 동시성을 갖지만 병렬성은 가지지 않는다.

그렇다고 싱글 코어라고 하여 반드시 동시성을 못갖는 것은 아니다. 하나의 코어는 여러 개의 파이프라인으로 처리되기 때문. 예를 들어서 명령을 해석하고, 메모리로부터 레지스터로 값을 불러오는 것은 CPU의 제어 장치가 처리하지만, 연산을 수행하는 것은 CPU의 연산 장치가 처리다다.
따라서 서로 다른 명령을 동시에 처리할 수 있는 상황이라면, 하나의 코어임에도 병렬적으로 실행될 수 있습니다.

## 컨텍스트 스위칭(Context Switching)
Context Switching이란 인터럽트를 발생시켜 CPU에서 실행중인 프로세스를 중단하고, 다른 프로세스를 처리하기 위한 과정.
Context Switching는 현재 실행중인 프로세스의 상태(Context)를 먼저 저장하고, 다음 프로세스를 동작시켜 작업을 처리한 후에 이전에 저장된 프로세스의 상태를 다시 복구.
여기서 인터럽트란 CPU가 프로세스를 실행하고 있을 때, 입출력 하드웨어 등의 장치나 예외상황이 발생하여 처리가 필요함을 CPU에게 알리는 것을 말한다.

## 프로세스와 쓰레드의 차이

### 프로세스

- 정의: 메모리에 올라와 실행되고 있는 프로그램의 인스턴스
- 특징
  - 운영체제로부터 독립된 메모리 영역을 할당받는다. (다른 프로세스의 자원에 접근 X)
  - 프로세스들은 독립적이기 때문에 통신하기 위해 IPC를 사용해야 한다.
  - 프로세스는 최소 1개의 쓰레드(메인 쓰레드)를 가지고 있다.

### 쓰레드

- 정의: 프로세스 내에서 할당받은 자원을 이용해 동작하는 실행 단위
- 특징
  - 쓰레드는 프로세스 내에서 Stack만 따로 할당 받고, Code, Data, Heap 영역은 공유한다.(Stack을 분리한 이유는 Stack에는 함수의 호출 정보가 저장되는데, Stack을 공유하면 LIFO 구조에 의해 실행 순서가 복잡해지기 때문에 실행 흐름을 원활하게 만들기 위함이다.)
  - 쓰레드는 프로세스의 자원을 공유하기 때문에 다른 쓰레드에 의한 결과를 즉시 확인할 수 있다.
  - 프로세스 내에 존재하며 프로세스가 할당받은 자원을 이용하여 실행된다.

## 레이스 컨디션과 그로 인해 발생할 수 있는 문제들
둘 이상의 실행 주체가 동시에 하나의 자원에 접근하기 위해 경쟁하는 상태.
레이스 컨디션에 의해 ```자원의 동기화 문제```, ```교착 상태```, ```프로세스 충돌``` 등의 문제가 발생할 수 있다.

## 데드락(DeadLock)과 임계 영역(Critical Section)
데드락(DeadLock) 또는 교착상태란 한정된 자원을 여러 프로세스가 사용하고자 할 때 발생하는 상황으로, 프로레스가 자원을 얻기 위해 영구적으로 기다리는 상태.
ex) 자원 A를 가진 프로세스 P1과 자원 B를 가진 프로세스 P2가 있을 때, P1은 B를 필요로 하고 P2는 A를 필요로 한다면 두 프로세스 P1, P2는 서로 자원을 얻기위해 무한정 대기하게 된다.
임계 영역은 둘 이상의 실행 주체가 동시에 접근해서는 안 되는 영역. 임계 영역에 동시 접근하여 데드락이 발생하는 등의 문제를 예방하기 위해서는 뮤텍스나 세마포어 등을 사용할 수 있다.

## 세마포어(Semaphore) vs 뮤텍스(Mutex)

### 세마포어

- 리소스에 동시 허용이 가능한 스레드의 수를 제어하는 데 사용됨
- 소유 권한이 없으므로, 잠금을 획득하지 않은 쓰레드도 signal 연산을 사용하여 잠금을 해제할 수 있음
- 초기 값을 설정할 수 있으며, 이 값은 허용 가능한 동시 액세스 수를 나타냄
- wait (P)와 signal (V) 연산을 통해 제어됨


### 뮤텍스

- 임계 영역을 보호하여 데이터 무결성을 보장하기 위해 사용됨
- 소유 권한을 가지므로, 잠금을 획득한쓰레드만 잠금을 해제할 수 있음
- 주로 이진 세마포어(Binary Semaphore)로 초기화되며, 두 가지 상태(잠금 상태와 잠금 해제 상태)만 가짐
- lock과 unlock 연산을 통해 제어됨